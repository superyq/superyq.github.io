import{g as f,r as u,h as d,B as t,K as l,J as c,D as p,M as $,L as V,F as m,X as i,aU as N,aV as D,ba as E,cP as F,bb as I,a2 as L,bc as y,bd as P,a5 as S}from"./index-D8FvNXUN.js";const j={class:"imgupload"},z={class:"item--img"},A=["src"],J={class:"item--model"},K=["onClick"],M=f({__name:"VideoUpload",props:{max:{type:Number,default:1}},setup(r){const _=r;let a=u(null),s=u([]),v=d(()=>_.max>s.value.length),h=d(()=>s.value.map((e,n)=>({src:e.base64,index:n})));const g=e=>{if(s.value.some(o=>o.name==e.file.name))return a.value=null,window.$msg.error(`'${e.file.name}' 图片已经存在`),!1},b=async e=>{console.log("file",e),F(e.file.file);let n=await I(e.file.file),o={...e.file,base64:n};a.value==null?s.value.push(o):(s.value.splice(a.value,1,o),a.value=null)},x=e=>{s.value.splice(e,1)};return(e,n)=>{const o=L,C=y,k=P;return t(),l("div",j,[c(k,E({accept:"video/*"},e.$attrs,{abstract:"",onBeforeUpload:g,onChange:b}),{default:p(()=>[c(C,{abstract:""},{default:p(({handleClick:w})=>[(t(!0),l($,null,V(m(h),(U,B)=>(t(),l("div",z,[i("video",{src:U.src,controls:""},null,8,A),i("div",J,[c(o,{class:"u__cursor",name:"delete",onClick:G=>x(B),size:"12"},null,8,["onClick"])])]))),256)),N(i("div",{class:"item--add u__flex-c u__cursor",onClick:w}," + ",8,K),[[D,m(v)]])]),_:1})]),_:1},16)])}}}),X=S(M,[["__scopeId","data-v-bf811fee"]]),q={class:"page-videoupload"},O=f({__name:"index",setup(r){return(_,a)=>(t(),l("div",q,[c(X)]))}});export{O as default};
