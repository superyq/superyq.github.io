(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages29"],{"456d":function(e,t,i){var n=i("4bf8"),r=i("0d58");i("5eda")("keys",function(){return function(e){return r(n(e))}})},"4fa3":function(e,t,i){"use strict";var n=i("76ee"),r=i.n(n);r.a},"5eda":function(e,t,i){var n=i("5ca1"),r=i("8378"),o=i("79e5");e.exports=function(e,t){var i=(r.Object||{})[e]||Object[e],a={};a[e]=t(i),n(n.S+n.F*o(function(){i(1)}),"Object",a)}},"76ee":function(e,t,i){},"982c":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("textarea",e._b({staticClass:"c-ueditor",attrs:{id:e.editorId,type:"text/plain"}},"textarea",e.$attrs,!1))},r=[],o=(i("96cf"),i("3b8d")),a=i("f672"),s=i.n(a),l=i("ed08");i("a481");function c(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function u(e){return c("/admin",e)}var d={serverUrl:"/admin/editor",toolbars:[["bold","italic","underline","strikethrough","forecolor","backcolor","justifyleft","justifycenter","justifyright","|","insertunorderedlist","insertorderedlist","blockquote","emotion","simpleupload","insertvideo","link","removeformat","|","rowspacingtop","rowspacingbottom","lineheight","paragraph","fontsize","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols"]],wordCount:!1,pasteplain:!0,enableAutoSave:!1,autoFloatEnabled:!0,initialFrameWidth:386,initialFrameHeight:500,elementPathEnabled:!1,autoClearinitialContent:!1,iframeCssUrl:u("plugins/ueditor/themes/iframe.css")},p=i("3786");s.a.Editor.prototype._bkGetActionUrl=s.a.Editor.prototype.getActionUrl,s.a.Editor.prototype.getActionUrl=function(e){return"uploadimage"==e||"uploadscrawl"==e||"uploadimage"==e?"//up-z2.qiniup.com/":"uploadvideo"==e?"//up-z2.qiniup.com/":this._bkGetActionUrl.call(this,e)};var f={name:"uEditor",props:{config:Object,defaultValue:String},data:function(){return{editor:"",editorId:"ueditor--".concat(Object(l["c"])())}},computed:{editorconfig:function(){return Object.assign({},d,this.config)}},watch:{defaultValue:function(e){this.setContent(e)}},methods:{getContent:function(){return this.editor.getContent()},setContent:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.editor&&this.$nextTick(function(){t.editor.setContent(e,i)})},initEditor:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["b"])("custom");case 2:t=e.sent,i=t.data,n=s.a.getEditor(this.editorId,this.editorconfig),n.ready(function(){r.$emit("ready",n),r.defaultValue&&r.setContent(r.defaultValue),n.execCommand("serverparam",{token:i}),n.addListener("blur",function(){r.$emit("blur")}),n.addListener("contentChange",function(){var e=n.getContent();r.$emit("change",e)})}),this.editor=n;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.initEditor()},beforeDestroy:function(){this.editor.destroy()}},h=f,g=i("2877"),m=Object(g["a"])(h,n,r,!1,null,null,null);t["a"]=m.exports},"9dac":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{center:"",width:"500px",title:"文件上传",visible:e.visible,"append-to-body":"","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"custom-class":"cui-upload"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.afterDialogCloseHandle()}}},[i("el-upload",e._g(e._b({ref:"upload",staticClass:"cui-upload__wrapper",attrs:{limit:e.limit,accept:e.accept,multiple:e.multiple,action:e.uploadUrl,"auto-upload":!1,"list-type":e.listType,"on-exceed":e.exceedHandle,"on-preview":e.previewHandle,"on-success":e.successHandle,"before-upload":e.beforeUpload,"before-remove":e.beforeRemoveHandle,"http-request":e.uploadFileWithQiniu}},"el-upload",e.$attrs,!1),e.$listeners),[i("el-button",{ref:"browse",attrs:{slot:"trigger",size:"small",type:"warning",icon:"el-icon-upload"},slot:"trigger"},[e._v("选取文件")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._t("tip",[e._v(e._s(e.tip||"只能上传jpg/png文件，且不超过500kb"))])],2)],1),i("el-dialog",{attrs:{title:e.previewTitle,visible:e.previewVisible,top:"5vh","append-to-body":""},on:{"update:visible":function(t){e.previewVisible=t}}},[i("img",{attrs:{width:"100%",src:e.previewUrl,alt:e.previewTitle}})]),i("template",{slot:"footer"},[i("el-button",{attrs:{type:"default"},on:{click:function(t){return e.beforeDialogCloseHandle()}}},[e._v("关闭")]),i("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.submitUpload}},[e._v("上传")])],1)],2)},r=[],o=(i("96cf"),i("3b8d")),a=(i("7f7f"),i("ac6a"),i("456d"),i("c5f6"),i("ed08")),s=i("054f"),l=i("5f87"),c=i("3786"),u={name:"cui-upload",props:{multiple:Boolean,listType:{type:String,default:"text"},accept:{type:String,default:"image/jpeg,image/gif,image/png"},tip:String,limit:Number,beforeUpload:Function,validFile:Function},data:function(){return{uploadUrl:"",previewUrl:"",previewTitle:"图片预览",visible:!1,previewVisible:!1,reqs:{},uploadToken:""}},computed:{submitting:function(){return Object.keys(this.reqs).length>0}},methods:{isImage:function(e){return-1!==e.indexOf("image")},toggleBrowse:function(){this.visible=!this.visible},afterDialogCloseHandle:function(){this.$refs["upload"].clearFiles()},beforeDialogCloseHandle:function(){var e=this;if(this.submitting)return this.$confirm("文件上传中，是否取消上传？","提示",{type:"warning",confirmButtonText:"继续上传",cancelButtonText:"取消上传并退出"}).then(a["i"]).catch(function(){e.clearReqs(null,function(){e.visible=!1})}),!1;this.visible=!1},exceedHandle:function(){this.$alert("超过最大文件数，请移除多余文件！","提示",{type:"warning"}).catch(a["i"])},beforeRemoveHandle:function(e){return this.$confirm("确定移除文件[".concat(e.name,"]？"),"移除文件")},clearReqs:function(e,t){if(e)this.reqs[e]["abort"](),this.$delete(this.reqs,e);else for(var i in this.reqs)this.reqs[i].abort();t()},previewHandle:function(e){var t=this,i=e.raw.type,n=e.url,r=e.name;this.isImage(i)&&n&&(this.previewUrl=n,this.previewTitle=r||this.previewTitle,this.$nextTick(function(){t.previewVisible=!0}))},successHandle:function(e,t,i){this.$emit("on-upload-success",e,t,i)},submitUpload:function(){if(!this.submitting){var e=this.$refs["upload"];e&&(e.uploadFiles.length?this.$refs["upload"].submit():this.$alert("请选择需要上传的文件！","提示",{type:"warning"}).catch(a["i"]))}},uploadFileWithQiniu:function(e){var t=this,i=e.file,n=e.onSuccess,r=e.onError,o=e.onProgress,a=i.uid,c=function(){t.$delete(t.reqs,a)},u=function(){c(),n.apply(void 0,arguments)},d=function(){c();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];401===t[0].code&&l["a"].logout("登录失效，是否前往登录页重新登录？","重新登录",{confirmButtonText:"重新登录",showCancelButton:!1}),r.apply(void 0,t)},p=function(e){var t=e.total;o(t)},f=Object(s["a"])(this.uploadToken,i,u,d,p);return this.$set(this.reqs,a,f),f.abort=function(){c(),f.unsubscribe()},f},refreshUploadToken:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])();case 2:t=e.sent,i=t.data,this.uploadToken=i;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.refreshUploadToken()}},d=u,p=i("2877"),f=Object(p["a"])(d,n,r,!1,null,null,null);t["a"]=f.exports},c4c6:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-test"},[e._v("测试页面"),i("u-editor",{ref:"editor",attrs:{defaultValue:"哇啊啊啊哈"}}),i("el-button",{on:{click:function(t){return e.getContent()}}},[e._v("获取文本框内容")]),i("cui-upload",{ref:"upload",attrs:{limit:2,"list-type":"picture","valid-file":e.checkFiles}},[i("template",{slot:"tip"},[e._v("只能上传jpg/png文件，且不超过2张")])],2),i("div",{staticStyle:{width:"300px",height:"1000px",background:"linear-gradient(red, blue)"}}),i("div",{directives:[{name:"img",rawName:"v-img",value:"ucj65rjf9.jpg",expression:'"ucj65rjf9.jpg"'}],staticClass:"testVimg"}),i("el-button",{on:{click:function(t){return e.toggleBrowse()}}},[e._v("选择文件")])],1)},r=[],o=i("9dac"),a=i("23bc"),s=i("982c"),l=Object(a["a"])({prefix:"http://resource.immeet.com"}),c={name:"pageTest",components:{uEditor:s["a"],cuiUpload:o["a"]},directives:{img:l},methods:{toggleBrowse:function(){this.$refs["upload"]["toggleBrowse"]()},checkFiles:function(){return new Promise(function(){})},getContent:function(){}}},u=c,d=(i("4fa3"),i("2877")),p=Object(d["a"])(u,n,r,!1,null,null,null);t["default"]=p.exports}}]);