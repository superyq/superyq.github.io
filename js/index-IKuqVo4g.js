import{g as h,aZ as L,aU as k,aV as $,B as l,C as S,D as f,K as c,M as I,L as B,X as u,r as p,h as b,J as o,F as g,ba as A,bb as F,a2 as q,bc as J,bd as K,a5 as M}from"./index-D8FvNXUN.js";const P=["src"],X=h({__name:"ImgView",props:{images:{type:Array,required:!0}},setup(r,{expose:i}){return i({showImg:s=>{document.getElementsByClassName("show-img")[s].click()}}),(s,v)=>{const _=L("viewer");return k((l(),S(_,{images:r.images},{default:f(()=>[(l(!0),c(I,null,B(r.images,m=>(l(),c("div",null,[u("img",{class:"show-img",src:m.src},null,8,P)]))),256))]),_:1},8,["images"])),[[$,!1]])}}}),Z={class:"imgupload"},z={class:"item--img"},G=["src"],H={class:"item--model u__flex-c"},O=["onClick"],Q=h({__name:"ImgUpload",props:{max:{type:Number,default:10}},setup(r){const i=r;let a=p(null),s=p([]),v=b(()=>i.max>s.value.length),_=b(()=>s.value.map((e,t)=>({src:e.base64,index:t})));const m=e=>{if(s.value.some(n=>n.name==e.file.name))return a.value=null,window.$msg.error(`'${e.file.name}' 图片已经存在`),!1},y=async e=>{let t=await F(e.file.file),n={...e.file,base64:t};a.value==null?s.value.push(n):(s.value.splice(a.value,1,n),a.value=null)},U=e=>{s.value.splice(e,1)},V=(e,t)=>{a.value=e,t()},w=p(),E=e=>{w.value.showImg(e)};return(e,t)=>{const n=q,N=J,j=K;return l(),c("div",Z,[o(X,{ref_key:"imgView",ref:w,images:g(_)},null,8,["images"]),o(j,A({accept:".png, .jpeg, .jpg"},e.$attrs,{abstract:"",onBeforeUpload:m,onChange:y}),{default:f(()=>[o(N,{abstract:""},{default:f(({handleClick:C})=>[(l(!0),c(I,null,B(g(_),(D,d)=>(l(),c("div",z,[u("img",{src:D.src},null,8,G),u("div",H,[o(n,{class:"u__cursor",name:"eye",onClick:x=>E(d)},null,8,["onClick"]),o(n,{class:"u__cursor",name:"delete",onClick:x=>U(d)},null,8,["onClick"]),o(n,{class:"u__cursor",name:"edit",onClick:x=>V(d,C)},null,8,["onClick"])])]))),256)),k(u("div",{class:"item--add u__flex-c u__cursor",onClick:C}," + ",8,O),[[$,g(v)]])]),_:1})]),_:1},16)])}}}),R=M(Q,[["__scopeId","data-v-cfecc039"]]),T={class:"index"},Y=h({__name:"index",setup(r){return(i,a)=>(l(),c("div",T,[o(R)]))}});export{Y as default};
