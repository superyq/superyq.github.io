(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages17"],{"386d":function(t,e,a){"use strict";var n=a("cb7c"),i=a("83a1"),r=a("5f1b");a("214f")("search",1,function(t,e,a,l){return[function(a){var n=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=l(a,t,this);if(e.done)return e.value;var s=n(t),o=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var u=r(s,o);return i(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]})},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},a8db:function(t,e,a){"use strict";var n=a("e265"),i=a.n(n),r=a("a4bb"),l=a.n(r);function s(t,e){if(null==t)return{};var a,n,i={},r=l()(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(i[a]=t[a]);return i}function o(t,e){if(null==t)return{};var a,n,r=s(t,e);if(i.a){var l=i()(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}a.d(e,"a",function(){return o})},b040:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cui-page",{staticClass:"ores page-ores"},[a("template",{slot:"header"},[a("el-form",{attrs:{size:"mini",inline:!0,model:t.search,"label-suffix":":"},nativeOn:{key:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateTableData(1)}}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange","range-separator":"——","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.updateTableData(1)}}},[t._v("查询")])],1)],1)],1),a("ores-list",{attrs:{list:t.list,loading:t.loading}},[a("el-table-column",{attrs:{slot:"append",fixed:"right",label:"操作",align:"center",width:"240px"},slot:"append",scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row.id;return[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-check"},on:{click:function(e){return t.fetchDetailHandle(n)}}},[t._v("领取记录")])],1)]}}])})],1),a("cui-pagination",t._b({attrs:{slot:"footer"},on:{"size-change":t.limitChangeHandle,"current-change":t.currentChangeHandle},slot:"footer"},"cui-pagination",t.pages,!1)),t.oresUserVisible?a("ores-user",{ref:"oresUser"}):t._e()],2)},i=[],r=a("cebc"),l=(a("386d"),a("a8db")),s=a("c1fb");function o(t){return s["a"].get("ores",{params:t})}function c(t){var e=t.id,a=Object(l["a"])(t,["id"]);return s["a"].get("ores/".concat(e),{params:a})}var u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cui-table",{attrs:{data:t.list,loading:t.loading}},[a("el-table-column",{attrs:{fixed:"left",prop:"id",label:"#ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"provide_num",label:"总发放数","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row.provide_num;return[t._v(t._s(+a||0))]}}])}),a("el-table-column",{attrs:{prop:"dig_total",label:"已领取数","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row.dig_total;return[a("p",{staticClass:"c-success"},[t._v(t._s(+n||0))])]}}])}),a("el-table-column",{attrs:{prop:"power_total",label:"总矿力","header-align":"center",width:"150px"}}),a("el-table-column",{attrs:{prop:"active_user_num",label:"活跃人数","header-align":"center",width:"150px"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",align:"center",width:"196px"}}),t._t("append")],2)},d=[],p={name:"OresList",props:{list:{type:Array,required:!0},loading:{type:Boolean,required:!0}}},f=p,h=a("2877"),g=Object(h["a"])(f,u,d,!1,null,null,null),b=g.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"用户领取记录","lock-scroll":!0,visible:t.visible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.visible=e}}},[a("cui-page",[a("cui-table",{attrs:{data:t.list,loading:t.loading,height:"400px"}},[a("el-table-column",{attrs:{label:"用户信息","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row.user,i=n.avatar,r=n.name;return a("div",{staticClass:"cui-userbox cui-userbox--large"},[a("img",{directives:[{name:"pic",rawName:"v-pic",value:{img:i},expression:"{ img: avatar }"}],staticClass:"cui-userbox__avatar",attrs:{alt:r}}),a("span",{staticClass:"cui-userbox__name"},[a("b",[t._v(t._s(r))])])])}}])}),a("el-table-column",{attrs:{prop:"user.tel",label:"手机号",align:"center",width:"140px"}}),a("el-table-column",{attrs:{label:"数量","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row.num;return[a("p",[t._v(t._s(+n||0))])]}}])}),a("el-table-column",{attrs:{label:"状态",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row.status;return[a("el-tag",{attrs:{type:t.tagOptions[n]["type"]}},[t._v(t._s(t.tagOptions[n]["name"]))])]}}])})],1),a("cui-pagination",t._b({attrs:{slot:"footer"},on:{"size-change":t.limitChangeHandle,"current-change":t.currentChangeHandle},slot:"footer"},"cui-pagination",t.pages,!1))],1)],1)},v=[],_=a("f9a8"),x=a.n(_),y={name:"OresUser",data:function(){return{defaultAvatar:x.a,id:0,search:{},list:[],loading:!1,pages:{current:1,limit:20,total:1},tagOptions:[{type:"warning",name:"未领取"},{type:"success",name:"已领取"}],visible:!1}},methods:{init:function(t){var e=this;this.visible=!0,this.$nextTick(function(){e.id=t,e.list=[],e.pages.current=1,e.updateTableData()})},avatarError:function(t){t.target.src=x.a},updateTableData:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading||(this.loading=e,c(Object(r["a"])({id:this.id,page:this.pages.current,limit:this.pages.limit},this.search)).then(function(e){var a=e.data;a=void 0===a?{}:a;var n=a.data,i=void 0===n?[]:n,r=a.total;t.list=i,t.pages.total=r,t.loading=!1}).catch(function(){t.loading=!1}))},limitChangeHandle:function(t){this.pages.limit=t,this.updateTableData()},currentChangeHandle:function(t){this.pages.current=t,this.updateTableData()}}},w=y,k=Object(h["a"])(w,m,v,!1,null,null,null),O=k.exports,C={name:"Ores",components:{OresList:b,OresUser:O},data:function(){return{search:{start:"",end:""},list:[],loading:!1,pages:{current:1,limit:20,total:1},time:[],oresUserVisible:!1}},watch:{time:function(t){t?(this.search["start"]=t[0],this.search["end"]=t[1]):this.search.start=this.search.end=""}},methods:{updateTableData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pages.current,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading||(this.loading=a,o(Object(r["a"])({page:e,limit:this.pages.limit},this.search)).then(function(e){var a=e.data;a=void 0===a?{}:a;var n=a.data,i=void 0===n?[]:n,r=a.total;t.list=i,t.pages.total=r,t.loading=!1}).catch(function(){t.loading=!1}))},limitChangeHandle:function(t){this.pages.limit=t,this.updateTableData(1)},currentChangeHandle:function(t){this.updateTableData(t)},fetchDetailHandle:function(t){var e=this;this.oresUserVisible=!0,this.$nextTick(function(){e.$refs.oresUser&&e.$refs.oresUser.init(t)})}},mounted:function(){this.updateTableData()}},D=C,T=Object(h["a"])(D,n,i,!1,null,null,null);e["default"]=T.exports},f9a8:function(t,e,a){t.exports=a.p+"img/avatar__user.d76349f5.png"}}]);