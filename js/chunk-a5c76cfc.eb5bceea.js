(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5c76cfc"],{"11ba":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order"},[r("el-dialog",{attrs:{title:"选择快递",visible:e.dialogVisible,width:"50%","tooltip-effect":"dark",border:"",stripe:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入快递名称"},model:{value:e.searchExpress.name,callback:function(t){e.$set(e.searchExpress,"name",t)},expression:"searchExpress.name"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchExpresss},slot:"append"})],1),r("el-input",{staticClass:"order__input",attrs:{size:"mini",placeholder:"请输入运单号"},model:{value:e.expressForm.express_no,callback:function(t){e.$set(e.expressForm,"express_no",t)},expression:"expressForm.express_no"}},[r("template",{slot:"prepend"},[e._v("运单号 :")])],2),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.expressList,height:"400",border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"id",label:"快递ID",width:"80",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"快递名",width:"150",align:"left"}}),r("el-table-column",{attrs:{prop:"code",label:"快递代码"}}),r("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.select(s)}}},[e._v("发货")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.searchExpress.page,"page-size":e.searchExpress.limit,layout:"total, prev, pager, next, jumper",total:e.totalExpress},on:{"current-change":e.handleCurrentChangeExpress}})],1),r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"订单号 :"}},[r("el-input",{attrs:{size:"mini"},model:{value:e.search.order_no,callback:function(t){e.$set(e.search,"order_no",t)},expression:"search.order_no"}})],1),r("el-form-item",{attrs:{label:"商品名称 :"}},[r("el-input",{attrs:{size:"mini"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),r("el-form-item",{attrs:{label:"日期 :"}},[r("el-date-picker",{attrs:{size:"mini",type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.changeTime},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:e.searchOrder}},[e._v("搜索")])],1)],1),r("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.searchOrder},model:{value:e.search.order_status,callback:function(t){e.$set(e.search,"order_status",t)},expression:"search.order_status"}},[r("el-tab-pane",{attrs:{label:"全部",name:"-1"}}),r("el-tab-pane",{attrs:{label:"待付款",name:"0"}}),r("el-tab-pane",{attrs:{label:"待发货",name:"1"}}),r("el-tab-pane",{attrs:{label:"已发货",name:"2"}}),r("el-tab-pane",{attrs:{label:"已完成",name:"3"}}),r("el-tab-pane",{attrs:{label:"已退款",name:"4"}}),r("el-tab-pane",{attrs:{label:"已退货",name:"5"}}),r("el-tab-pane",{attrs:{label:"已关闭",name:"6"}})],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderList,border:"",stripe:"",height:"600"}},[r("el-table-column",{attrs:{prop:"order_id",label:"订单ID",width:"80",align:"center"}}),r("el-table-column",{attrs:{prop:"goods_name",label:"商品信息","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[r("div",{staticClass:"order__goods"},[r("img",{staticClass:"order__goods-image",attrs:{src:s.goods_image}}),r("p",[e._v(e._s(s.goods_name))])])]}}])}),r("el-table-column",{attrs:{prop:"order_no",label:"订单号",width:"200",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"买家",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[r("p",[e._v(e._s(s.name))]),r("p",[e._v(e._s(s.phone))])]}}])}),r("el-table-column",{attrs:{label:"单价(元)/数量",width:"130",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[r("p",{staticClass:"order__goods-money"},[e._v("￥"+e._s(s.goods_price))]),r("p",[e._v("× "+e._s(s.num))])]}}])}),r("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"180",align:"center"}}),r("el-table-column",{attrs:{prop:"order_status",label:"交易状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[r("el-tag",{attrs:{type:e._f("changeTag")(s.order_status)}},[e._v(e._s(e._f("changStatus")(s.order_status)))])]}}])}),r("el-table-column",{attrs:{prop:"express_name",label:"快递名",width:"120",align:"left"}}),r("el-table-column",{attrs:{prop:"express_no",label:"运单号",width:"300",align:"left"}}),r("el-table-column",{attrs:{prop:"address",label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[r("el-button",{attrs:{size:"mini",disabled:s.order_status>=2,type:"success"},on:{click:function(t){return e.sendOrder(s)}}},[e._v("选择快递")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.search.page,"page-size":e.search.limit,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)},a=[],n=(r("7f7f"),r("386d"),r("c1fb"));function i(e){return n["a"].get("/orders",{params:e})}function l(e){var t=e.orderId,r=e.express_id,s=e.express_no;return n["a"].put("/order/".concat(t),{express_id:r,express_no:s})}function o(e){return Object(n["a"])({method:"get",url:"/express",params:e})}var c={name:"Order",data:function(){return{expressForm:{orderId:0,express_id:0,express_no:""},search:{name:"",start_time:"",end_time:"",order_no:"",order_status:"-1",page:1,limit:15},searchExpress:{name:"",code:"",limit:15,page:1},orderList:[],expressList:[],total:0,totalExpress:0,dialogVisible:!1,name:"",time:[]}},filters:{changeTag:function(e){switch(e){case 0:return" ";case 1:return" ";case 2:return"success";case 3:return"success";case 4:return"danger";case 5:return"danger"}},changStatus:function(e){switch(e){case 0:return"待付款";case 1:return"待发货";case 2:return"已发货";case 3:return"已完成";case 4:return"已退款";case 5:return"已退货";case 6:return"已关闭"}}},methods:{changeTime:function(e){e?(this.search.start_time=e[0],this.search.end_time=e[1]):this.search.start_time=this.search.end_time=""},select:function(e){var t=this;if(this.expressForm.express_id=e.id,""===this.expressForm.express_no.trim())return this.$message.error("请填写运单号!");this.$confirm("".concat(this.name,",确认发货?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){l(t.expressForm).then(function(){t.dialogVisible=!1,t.expressForm.express_no="",t.name="",t.getOrderList(),t.$message({type:"success",message:"发货成功!"})}).catch(function(e){t.$message.error(e.response.data.message)})}).catch(function(){t.$message({type:"info",message:"已取消发货"})})},handleCurrentChangeExpress:function(e){this.searchExpress.page=e,this.getExpressList()},getExpressList:function(){var e=this;o(this.searchExpress).then(function(t){var r=t.data,s=r.data,a=r.total;e.expressList=s,e.totalExpress=a})},sendOrder:function(e){this.dialogVisible=!0,this.expressForm.orderId=e.id,this.name=e.goods_name},handleCurrentChange:function(e){this.search.page=e,this.getOrderList()},getOrderList:function(){var e=this;i(this.search).then(function(t){var r=t.data,s=r.data,a=r.total;e.orderList=s,e.total=a})},searchOrder:function(){this.search.page=1,this.getOrderList()},searchExpresss:function(){this.searchExpress.page=1,this.getExpressList()}},created:function(){this.getOrderList(),this.getExpressList()}},u=c,p=(r("acb0"),r("2877")),d=Object(p["a"])(u,s,a,!1,null,null,null);t["default"]=d.exports},3375:function(e,t,r){},"386d":function(e,t,r){"use strict";var s=r("cb7c"),a=r("83a1"),n=r("5f1b");r("214f")("search",1,function(e,t,r,i){return[function(r){var s=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,s):new RegExp(r)[t](String(s))},function(e){var t=i(r,e,this);if(t.done)return t.value;var l=s(e),o=String(this),c=l.lastIndex;a(c,0)||(l.lastIndex=0);var u=n(l,o);return a(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]})},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},acb0:function(e,t,r){"use strict";var s=r("3375"),a=r.n(s);a.a}}]);
//# sourceMappingURL=chunk-a5c76cfc.eb5bceea.js.map