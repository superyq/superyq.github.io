(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dac3e40"],{"09dd":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"userForm",staticClass:"user",attrs:{rules:t.rules,model:t.user,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"用户头像 :",prop:"avatar_id"}},[r("div",[t.url?r("div",{staticClass:"user__image",on:{click:t.chooseFile}},[r("img",{attrs:{src:t.url}})]):r("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.chooseFile}},[t._v("头像上传")]),r("input",{ref:"fileInput",attrs:{hidden:"",type:"file"},on:{change:function(e){return t.fileChangeHandle(e)}}})],1)]),r("el-form-item",{attrs:{label:"用户名 :",prop:"name"}},[r("el-input",{staticClass:"user__input",attrs:{size:"mini"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),r("el-form-item",{attrs:{label:"电话 :",prop:"phone"}},[r("el-input",{staticClass:"user__input",attrs:{size:"mini"},model:{value:t.user.phone,callback:function(e){t.$set(t.user,"phone",e)},expression:"user.phone"}})],1),r("el-form-item",{attrs:{label:"邮箱 :",prop:"email"}},[r("el-input",{staticClass:"user__input",attrs:{size:"mini"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onSubmit}},[t._v("立即修改")]),r("el-button",{attrs:{size:"mini"}},[t._v("取消")])],1)],1)},i=[],a=r("a745"),s=r.n(a);function u(t){if(s()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var o=r("774e"),c=r.n(o),f=r("c8bb"),l=r.n(f);function d(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(t){return u(t)||d(t)||p()}var h=r("795b"),v=r.n(h),b=(r("ac6a"),r("5df3"),r("7f7f"),r("2934")),g=r("c1fb");function S(t){var e=new FormData;return e.append("file",t),g["a"].post("/upload",e,{headers:{"Content-Type":"multipart/form-data"}})}var y={name:"User",data:function(){var t=function(t,e,r){var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(e&&!n.test(e))return r(new Error("请输入正确邮箱"));r()},e=function(t,e,r){if(!/^1[0-9]{10}$/.test(e))return r(new Error("请输入正确手机号"));r()};return{user:{name:"",email:"",phone:"",avatar_id:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{validator:t,trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:e,trigger:"blur"}]},url:""}},computed:{userAvatar:{get:function(){return this.$store.state.user.avatar},set:function(t){this.$store.commit("user/updateAvatar",t)}},userName:{get:function(){return this.$store.state.user.name},set:function(t){this.$store.commit("user/updateName",t)}}},methods:{getUserInfo:function(){var t=this;Object(b["c"])().then(function(e){var r=e.data,n=r.name,i=r.phone,a=r.email,s=r.avatar_id,u=r.avatar;t.user.name=n,t.user.email=a,t.user.phone=i,t.user.avatar_id=s,t.url=u?u.file_url:""})},onSubmit:function(){var t=this;this.$refs["userForm"].validate(function(e){e&&Object(b["i"])(t.user).then(function(){t.userAvatar=t.url,t.userName=t.user.name,t.$message.success("修改成功!")}).catch(function(e){t.$message.error(e.response.data.message)})})},chooseFile:function(){this.$refs.fileInput.click()},fileChangeHandle:function(t){var e=this,r=t.target.files||t.dataTransfer.files;v.a.all(m(r).map(function(t){return S(t)})).then(function(t){var r=t[0].data,n=r.file_id,i=r.file_url;e.user.avatar_id=n,e.url=i})}},mounted:function(){this.getUserInfo()}},L=y,_=(r("b90d"),r("2877")),w=Object(_["a"])(L,n,i,!1,null,null,null);e["default"]=w.exports},"1af6":function(t,e,r){var n=r("63b6");n(n.S,"Array",{isArray:r("9003")})},"20fd":function(t,e,r){"use strict";var n=r("d9f6"),i=r("aebd");t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},2934:function(t,e,r){"use strict";r.d(e,"d",function(){return i}),r.d(e,"e",function(){return a}),r.d(e,"g",function(){return s}),r.d(e,"c",function(){return u}),r.d(e,"i",function(){return o}),r.d(e,"f",function(){return c}),r.d(e,"h",function(){return f}),r.d(e,"a",function(){return l}),r.d(e,"b",function(){return d});var n=r("c1fb");function i(t){return Object(n["a"])({baseURL:"/verification/code",method:"post",data:{number:t,scene:"merchant-forget-password"}})}function a(t){return n["a"].post("/auth/login",t)}function s(){return n["a"].put("/auth/logout")}function u(){return n["a"].get("/info")}function o(t){return n["a"].put("/info",t)}function c(t){return n["a"].put("/login/password",t)}function f(t){return n["a"].patch("/pay/password",t)}function l(t){return n["a"].put("/find/login/password",t)}function d(t){return n["a"].patch("/find/pay/password",t)}},"549b":function(t,e,r){"use strict";var n=r("d864"),i=r("63b6"),a=r("241e"),s=r("b0dc"),u=r("3702"),o=r("b447"),c=r("20fd"),f=r("7cd6");i(i.S+i.F*!r("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,l,d=a(t),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,b=0,g=f(d);if(v&&(h=n(h,m>2?arguments[2]:void 0,2)),void 0==g||p==Array&&u(g))for(e=o(d.length),r=new p(e);e>b;b++)c(r,b,v?h(d[b],b):d[b]);else for(l=g.call(d),r=new p;!(i=l.next()).done;b++)c(r,b,v?s(l,h,[i.value,b],!0):i.value);return r.length=b,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"5df3":function(t,e,r){"use strict";var n=r("02f4")(!0);r("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},"774e":function(t,e,r){t.exports=r("d2d5")},"95d5":function(t,e,r){var n=r("40c3"),i=r("5168")("iterator"),a=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(n(e))}},a745:function(t,e,r){t.exports=r("f410")},ac6a:function(t,e,r){for(var n=r("cadf"),i=r("0d58"),a=r("2aba"),s=r("7726"),u=r("32e9"),o=r("84f2"),c=r("2b4c"),f=c("iterator"),l=c("toStringTag"),d=o.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=i(p),h=0;h<m.length;h++){var v,b=m[h],g=p[b],S=s[b],y=S&&S.prototype;if(y&&(y[f]||u(y,f,d),y[l]||u(y,l,b),o[b]=d,g))for(v in n)y[v]||a(y,v,n[v],!0)}},b90d:function(t,e,r){"use strict";var n=r("efe8"),i=r.n(n);i.a},c8bb:function(t,e,r){t.exports=r("54a1")},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},efe8:function(t,e,r){},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-2dac3e40.28fa33a2.js.map