import{g as x,T as V,S as I,r as N,U as S,B as U,K as k,X as n,J as o,D as t,F as a,P as c,ah as y,H as B,a1 as C,a2 as F,a3 as R}from"./index-_v_ROuBL.js";import{_ as $}from"./YInput.vue_vue_type_script_setup_true_lang-C2uzhNBd.js";import{N as q,_ as D}from"./FormItem-BtzGq-Ay.js";const T=l=>(C("data-v-551741c1"),l=l(),F(),l),Y={class:"c-contain"},z={class:"password-box"},E=T(()=>n("div",{class:"password-box_header"},"修改密码",-1)),H={class:"password-box_content"},J={class:"password-box_footer"},K=x({__name:"index",setup(l){const i=V();let _=I();function f(){_.logout().then(()=>{i.push("/login")})}let w=N(null),e=S({oldPassword:"",newPassword:"",submitPassword:""});function h(u,s){return e.newPassword===s}let P={oldPassword:{required:!0,message:"请输入原密码",trigger:"blur"},newPassword:[{required:!0,message:"请输入新密码",trigger:["blur","input"]},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],submitPassword:[{validator:()=>{},message:"请输入旧密码",trigger:["blur","input"]},{validator:h,message:"两次密码不一致",trigger:["blur"]}]};function g(u){u.preventDefault(),w.value.validate(s=>{s||y({userId:1,userOldPwd:e.oldPassword,userNewPwd:e.newPassword}).then(r=>{r.code===200&&(window.$msg.success("修改成功！"),f())})})}function b(){i.push({name:"home"})}return(u,s)=>{const r=$,m=q,v=D,p=B;return U(),k("div",Y,[n("div",z,[E,n("div",H,[o(v,{ref_key:"formRef",ref:w,"label-width":100,model:a(e),rules:a(P),"label-placement":"left",size:"medium"},{default:t(()=>[o(m,{path:"oldPassword"},{default:t(()=>[o(r,{modelValue:a(e).oldPassword,"onUpdate:modelValue":s[0]||(s[0]=d=>a(e).oldPassword=d),placeholder:"旧密码","show-password-on":"mousedown",type:"password","show-count":""},null,8,["modelValue"])]),_:1}),o(m,{path:"newPassword"},{default:t(()=>[o(r,{modelValue:a(e).newPassword,"onUpdate:modelValue":s[1]||(s[1]=d=>a(e).newPassword=d),placeholder:"新密码",type:"password",maxlength:"20","show-password-on":"mousedown","show-count":""},null,8,["modelValue"])]),_:1}),o(m,{path:"submitPassword"},{default:t(()=>[o(r,{ref:"rPasswordFormItemRef",modelValue:a(e).submitPassword,"onUpdate:modelValue":s[2]||(s[2]=d=>a(e).submitPassword=d),placeholder:"确认新密码","show-password-on":"mousedown",maxlength:"20","show-count":"",type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),n("div",J,[o(p,{class:"password-box_footer-btn",onClick:b},{default:t(()=>[c("取消")]),_:1}),o(p,{class:"password-box_footer-btn",type:"info",onClick:g},{default:t(()=>[c("提交")]),_:1})])])])}}}),A=R(K,[["__scopeId","data-v-551741c1"]]);export{A as default};
