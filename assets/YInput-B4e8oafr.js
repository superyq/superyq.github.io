import{g as W,q as u,aI as De,aJ as Pe,aK as Fe,aL as Oe,d as ke,b as Z,u as Ae,j as de,ab as _e,ac as Ue,r as S,ad as $e,ae as Ee,aM as g,m as Le,M as He,h as F,aN as ze,ak as fe,p as ee,aO as te,n as ne,al as le,aw as re,aP as je,av as V,at as Ge,aQ as Ke,B as We,C as ae,D as qe,aF as Je,aR as Qe,E as Xe,F as ie,G as Ye}from"./index-BkQ_KyLE.js";const Ze=W({name:"Remove",render(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},u("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),et=t=>{const{textColorDisabled:r}=t;return{iconColorDisabled:r}},tt=De({name:"InputNumber",common:Pe,peers:{Button:Fe,Input:Oe},self:et}),nt=tt;function lt(t){return t==null||typeof t=="string"&&t.trim()===""?null:Number(t)}function rt(t){return t.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(t)||/^\.\d+$/.test(t))}function G(t){return t==null?!0:!Number.isNaN(t)}function ue(t,r){return t==null?"":r===void 0?String(t):t.toFixed(r)}function K(t){if(t===null)return null;if(typeof t=="number")return t;{const r=Number(t);return Number.isNaN(r)?null:r}}const at=ke([Z("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),Z("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),oe=800,se=100,it=Object.assign(Object.assign({},de.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),ut=W({name:"InputNumber",props:it,setup(t){const{mergedBorderedRef:r,mergedClsPrefixRef:o,mergedRtlRef:w}=Ae(t),i=de("InputNumber","-input-number",at,nt,t,o),{localeRef:f}=_e("InputNumber"),b=Ue(t),{mergedSizeRef:x,mergedDisabledRef:T,mergedStatusRef:O}=b,c=S(null),q=S(null),J=S(null),k=S(t.defaultValue),ce=$e(t,"value"),m=Ee(ce,k),h=S(""),A=e=>{const n=String(e).split(".")[1];return n?n.length:0},me=e=>{const n=[t.min,t.max,t.step,e].map(l=>l===void 0?0:A(l));return Math.max(...n)},ve=g(()=>{const{placeholder:e}=t;return e!==void 0?e:f.value.placeholder}),C=g(()=>{const e=K(t.step);return e!==null?e===0?1:Math.abs(e):1}),Q=g(()=>{const e=K(t.min);return e!==null?e:null}),X=g(()=>{const e=K(t.max);return e!==null?e:null}),N=e=>{const{value:n}=m;if(e===n){I();return}const{"onUpdate:value":l,onUpdateValue:a,onChange:d}=t,{nTriggerFormInput:v,nTriggerFormChange:y}=b;d&&V(d,e),a&&V(a,e),l&&V(l,e),k.value=e,v(),y()},s=({offset:e,doUpdateIfValid:n,fixPrecision:l,isInputing:a})=>{const{value:d}=h;if(a&&rt(d))return!1;const v=(t.parse||lt)(d);if(v===null)return n&&N(null),null;if(G(v)){const y=A(v),{precision:M}=t;if(M!==void 0&&M<y&&!l)return!1;let p=parseFloat((v+e).toFixed(M??me(v)));if(G(p)){const{value:z}=X,{value:j}=Q;if(z!==null&&p>z){if(!n||a)return!1;p=z}if(j!==null&&p<j){if(!n||a)return!1;p=j}return t.validator&&!t.validator(p)?!1:(n&&N(p),p)}}return!1},I=()=>{const{value:e}=m;if(G(e)){const{format:n,precision:l}=t;n?h.value=n(e):e===null||l===void 0||A(e)>l?h.value=ue(e,void 0):h.value=ue(e,l)}else h.value=String(e)};I();const pe=g(()=>s({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),_=g(()=>{const{value:e}=m;if(t.validator&&e===null)return!1;const{value:n}=C;return s({offset:-n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),U=g(()=>{const{value:e}=m;if(t.validator&&e===null)return!1;const{value:n}=C;return s({offset:+n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function he(e){const{onFocus:n}=t,{nTriggerFormFocus:l}=b;n&&V(n,e),l()}function ge(e){var n,l;if(e.target===((n=c.value)===null||n===void 0?void 0:n.wrapperElRef))return;const a=s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(a!==!1){const y=(l=c.value)===null||l===void 0?void 0:l.inputElRef;y&&(y.value=String(a||"")),m.value===a&&I()}else I();const{onBlur:d}=t,{nTriggerFormBlur:v}=b;d&&V(d,e),v(),Ge(()=>{I()})}function be(e){const{onClear:n}=t;n&&V(n,e)}function $(){const{value:e}=U;if(!e){H();return}const{value:n}=m;if(n===null)t.validator||N(Y());else{const{value:l}=C;s({offset:l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function E(){const{value:e}=_;if(!e){L();return}const{value:n}=m;if(n===null)t.validator||N(Y());else{const{value:l}=C;s({offset:-l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const xe=he,Ie=ge;function Y(){if(t.validator)return null;const{value:e}=Q,{value:n}=X;return e!==null?Math.max(0,e):n!==null?Math.min(0,n):0}function ye(e){be(e),N(null)}function Ve(e){var n,l,a;!((n=J.value)===null||n===void 0)&&n.$el.contains(e.target)&&e.preventDefault(),!((l=q.value)===null||l===void 0)&&l.$el.contains(e.target)&&e.preventDefault(),(a=c.value)===null||a===void 0||a.activate()}let B=null,R=null,D=null;function L(){D&&(window.clearTimeout(D),D=null),B&&(window.clearInterval(B),B=null)}function H(){P&&(window.clearTimeout(P),P=null),R&&(window.clearInterval(R),R=null)}function we(){L(),D=window.setTimeout(()=>{B=window.setInterval(()=>{E()},se)},oe),te("mouseup",document,L,{once:!0})}let P=null;function Ne(){H(),P=window.setTimeout(()=>{R=window.setInterval(()=>{$()},se)},oe),te("mouseup",document,H,{once:!0})}const Be=()=>{R||$()},Re=()=>{B||E()};function Me(e){var n,l;if(e.key==="Enter"){if(e.target===((n=c.value)===null||n===void 0?void 0:n.wrapperElRef))return;s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((l=c.value)===null||l===void 0||l.deactivate())}else if(e.key==="ArrowUp"){if(!U.value||t.keyboard.ArrowUp===!1)return;e.preventDefault(),s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&$()}else if(e.key==="ArrowDown"){if(!_.value||t.keyboard.ArrowDown===!1)return;e.preventDefault(),s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&E()}}function Se(e){h.value=e,t.updateValueOnInput&&!t.format&&!t.parse&&t.precision===void 0&&s({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}Le(m,()=>{I()});const Te={focus:()=>{var e;return(e=c.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=c.value)===null||e===void 0?void 0:e.blur()},select:()=>{var e;return(e=c.value)===null||e===void 0?void 0:e.select()}},Ce=He("InputNumber",w,o);return Object.assign(Object.assign({},Te),{rtlEnabled:Ce,inputInstRef:c,minusButtonInstRef:q,addButtonInstRef:J,mergedClsPrefix:o,mergedBordered:r,uncontrolledValue:k,mergedValue:m,mergedPlaceholder:ve,displayedValueInvalid:pe,mergedSize:x,mergedDisabled:T,displayedValue:h,addable:U,minusable:_,mergedStatus:O,handleFocus:xe,handleBlur:Ie,handleClear:ye,handleMouseDown:Ve,handleAddClick:Be,handleMinusClick:Re,handleAddMousedown:Ne,handleMinusMousedown:we,handleKeyDown:Me,handleUpdateDisplayedValue:Se,mergedTheme:i,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:F(()=>{const{self:{iconColorDisabled:e}}=i.value,[n,l,a,d]=ze(e);return{textColorTextDisabled:`rgb(${n}, ${l}, ${a})`,opacityDisabled:`${d}`}})})},render(){const{mergedClsPrefix:t,$slots:r}=this,o=()=>u(re,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ne(r["minus-icon"],()=>[u(le,{clsPrefix:t},{default:()=>u(Ze,null)})])}),w=()=>u(re,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ne(r["add-icon"],()=>[u(le,{clsPrefix:t},{default:()=>u(je,null)})])});return u("div",{class:[`${t}-input-number`,this.rtlEnabled&&`${t}-input-number--rtl`]},u(fe,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var i;return this.showButton&&this.buttonPlacement==="both"?[o(),ee(r.prefix,f=>f?u("span",{class:`${t}-input-number-prefix`},f):null)]:(i=r.prefix)===null||i===void 0?void 0:i.call(r)},suffix:()=>{var i;return this.showButton?[ee(r.suffix,f=>f?u("span",{class:`${t}-input-number-suffix`},f):null),this.buttonPlacement==="right"?o():null,w()]:(i=r.suffix)===null||i===void 0?void 0:i.call(r)}}))}}),st=W({__name:"YInput",props:{modelValue:{type:null,required:!0},width:{type:String,default:Ke},isNumber:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:r}){const o=t;let w=r;const i=F({get(){return o.modelValue},set(x){w("update:modelValue",x)}}),f=F(()=>({width:o.width=="auto"?"100%":`${o.width}`})),b=F(()=>o.isNumber?ut:fe);return(x,T)=>(Xe(),We(Qe(b.value),{value:i.value,"onUpdate:value":T[0]||(T[0]=O=>i.value=O),size:qe(Ye),style:Je(f.value),clearable:""},{prefix:ae(()=>[ie(x.$slots,"prefix")]),suffix:ae(()=>[ie(x.$slots,"suffix")]),_:3},40,["value","size","style"]))}});export{st as default};
