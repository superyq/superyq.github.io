import{g as K,t as a,d as Ce,b as Z,u as De,j as de,be as Fe,bf as Oe,r as M,ap as Ae,ax as ke,aA as g,p as _e,b3 as Ue,h as F,bT as $e,af as fe,s as ee,bU as Ee,bv as te,q as ne,au as le,bH as re,bV as He,ay as I,b5 as ze,bW as je,B as Le,C as Ge,D as ie,E as ue,F as We,G as Ke,a9 as qe,aS as Xe}from"./index-_v_ROuBL.js";const Ye=K({name:"Remove",render(){return a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function Je(t){return t==null||typeof t=="string"&&t.trim()===""?null:Number(t)}function Qe(t){return t.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(t)||/^\.\d+$/.test(t))}function G(t){return t==null?!0:!Number.isNaN(t)}function ae(t,i){return t==null?"":i===void 0?String(t):t.toFixed(i)}function W(t){if(t===null)return null;if(typeof t=="number")return t;{const i=Number(t);return Number.isNaN(i)?null:i}}const Ze=Ce([Z("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),Z("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),se=800,oe=100,et=Object.assign(Object.assign({},de.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),tt=K({name:"InputNumber",props:et,setup(t){const{mergedBorderedRef:i,mergedClsPrefixRef:s,mergedRtlRef:w}=De(t),u=de("InputNumber","-input-number",Ze,Ee,t,s),{localeRef:f}=Fe("InputNumber"),b=Oe(t),{mergedSizeRef:x,mergedDisabledRef:T,mergedStatusRef:O}=b,c=M(null),q=M(null),X=M(null),A=M(t.defaultValue),ce=Ae(t,"value"),m=ke(ce,A),h=M(""),k=e=>{const n=String(e).split(".")[1];return n?n.length:0},me=e=>{const n=[t.min,t.max,t.step,e].map(l=>l===void 0?0:k(l));return Math.max(...n)},ve=g(()=>{const{placeholder:e}=t;return e!==void 0?e:f.value.placeholder}),P=g(()=>{const e=W(t.step);return e!==null?e===0?1:Math.abs(e):1}),Y=g(()=>{const e=W(t.min);return e!==null?e:null}),J=g(()=>{const e=W(t.max);return e!==null?e:null}),B=e=>{const{value:n}=m;if(e===n){y();return}const{"onUpdate:value":l,onUpdateValue:r,onChange:d}=t,{nTriggerFormInput:v,nTriggerFormChange:V}=b;d&&I(d,e),r&&I(r,e),l&&I(l,e),A.value=e,v(),V()},o=({offset:e,doUpdateIfValid:n,fixPrecision:l,isInputing:r})=>{const{value:d}=h;if(r&&Qe(d))return!1;const v=(t.parse||Je)(d);if(v===null)return n&&B(null),null;if(G(v)){const V=k(v),{precision:S}=t;if(S!==void 0&&S<V&&!l)return!1;let p=parseFloat((v+e).toFixed(S??me(v)));if(G(p)){const{value:j}=J,{value:L}=Y;if(j!==null&&p>j){if(!n||r)return!1;p=j}if(L!==null&&p<L){if(!n||r)return!1;p=L}return t.validator&&!t.validator(p)?!1:(n&&B(p),p)}}return!1},y=()=>{const{value:e}=m;if(G(e)){const{format:n,precision:l}=t;n?h.value=n(e):e===null||l===void 0||k(e)>l?h.value=ae(e,void 0):h.value=ae(e,l)}else h.value=String(e)};y();const pe=g(()=>o({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),_=g(()=>{const{value:e}=m;if(t.validator&&e===null)return!1;const{value:n}=P;return o({offset:-n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),U=g(()=>{const{value:e}=m;if(t.validator&&e===null)return!1;const{value:n}=P;return o({offset:+n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function he(e){const{onFocus:n}=t,{nTriggerFormFocus:l}=b;n&&I(n,e),l()}function ge(e){var n,l;if(e.target===((n=c.value)===null||n===void 0?void 0:n.wrapperElRef))return;const r=o({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(r!==!1){const V=(l=c.value)===null||l===void 0?void 0:l.inputElRef;V&&(V.value=String(r||"")),m.value===r&&y()}else y();const{onBlur:d}=t,{nTriggerFormBlur:v}=b;d&&I(d,e),v(),ze(()=>{y()})}function be(e){const{onClear:n}=t;n&&I(n,e)}function $(){const{value:e}=U;if(!e){z();return}const{value:n}=m;if(n===null)t.validator||B(Q());else{const{value:l}=P;o({offset:l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function E(){const{value:e}=_;if(!e){H();return}const{value:n}=m;if(n===null)t.validator||B(Q());else{const{value:l}=P;o({offset:-l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const xe=he,ye=ge;function Q(){if(t.validator)return null;const{value:e}=Y,{value:n}=J;return e!==null?Math.max(0,e):n!==null?Math.min(0,n):0}function Ve(e){be(e),B(null)}function Ie(e){var n,l,r;!((n=X.value)===null||n===void 0)&&n.$el.contains(e.target)&&e.preventDefault(),!((l=q.value)===null||l===void 0)&&l.$el.contains(e.target)&&e.preventDefault(),(r=c.value)===null||r===void 0||r.activate()}let N=null,R=null,C=null;function H(){C&&(window.clearTimeout(C),C=null),N&&(window.clearInterval(N),N=null)}function z(){D&&(window.clearTimeout(D),D=null),R&&(window.clearInterval(R),R=null)}function we(){H(),C=window.setTimeout(()=>{N=window.setInterval(()=>{E()},oe)},se),te("mouseup",document,H,{once:!0})}let D=null;function Be(){z(),D=window.setTimeout(()=>{R=window.setInterval(()=>{$()},oe)},se),te("mouseup",document,z,{once:!0})}const Ne=()=>{R||$()},Re=()=>{N||E()};function Se(e){var n,l;if(e.key==="Enter"){if(e.target===((n=c.value)===null||n===void 0?void 0:n.wrapperElRef))return;o({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((l=c.value)===null||l===void 0||l.deactivate())}else if(e.key==="ArrowUp"){if(!U.value||t.keyboard.ArrowUp===!1)return;e.preventDefault(),o({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&$()}else if(e.key==="ArrowDown"){if(!_.value||t.keyboard.ArrowDown===!1)return;e.preventDefault(),o({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&E()}}function Me(e){h.value=e,t.updateValueOnInput&&!t.format&&!t.parse&&t.precision===void 0&&o({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}_e(m,()=>{y()});const Te={focus:()=>{var e;return(e=c.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=c.value)===null||e===void 0?void 0:e.blur()},select:()=>{var e;return(e=c.value)===null||e===void 0?void 0:e.select()}},Pe=Ue("InputNumber",w,s);return Object.assign(Object.assign({},Te),{rtlEnabled:Pe,inputInstRef:c,minusButtonInstRef:q,addButtonInstRef:X,mergedClsPrefix:s,mergedBordered:i,uncontrolledValue:A,mergedValue:m,mergedPlaceholder:ve,displayedValueInvalid:pe,mergedSize:x,mergedDisabled:T,displayedValue:h,addable:U,minusable:_,mergedStatus:O,handleFocus:xe,handleBlur:ye,handleClear:Ve,handleMouseDown:Ie,handleAddClick:Ne,handleMinusClick:Re,handleAddMousedown:Be,handleMinusMousedown:we,handleKeyDown:Se,handleUpdateDisplayedValue:Me,mergedTheme:u,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:F(()=>{const{self:{iconColorDisabled:e}}=u.value,[n,l,r,d]=$e(e);return{textColorTextDisabled:`rgb(${n}, ${l}, ${r})`,opacityDisabled:`${d}`}})})},render(){const{mergedClsPrefix:t,$slots:i}=this,s=()=>a(re,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ne(i["minus-icon"],()=>[a(le,{clsPrefix:t},{default:()=>a(Ye,null)})])}),w=()=>a(re,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ne(i["add-icon"],()=>[a(le,{clsPrefix:t},{default:()=>a(He,null)})])});return a("div",{class:[`${t}-input-number`,this.rtlEnabled&&`${t}-input-number--rtl`]},a(fe,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var u;return this.showButton&&this.buttonPlacement==="both"?[s(),ee(i.prefix,f=>f?a("span",{class:`${t}-input-number-prefix`},f):null)]:(u=i.prefix)===null||u===void 0?void 0:u.call(i)},suffix:()=>{var u;return this.showButton?[ee(i.suffix,f=>f?a("span",{class:`${t}-input-number-suffix`},f):null),this.buttonPlacement==="right"?s():null,w()]:(u=i.suffix)===null||u===void 0?void 0:u.call(i)}}))}}),lt=K({__name:"YInput",props:{modelValue:{type:null,required:!0},width:{type:String,default:je},isNumber:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:i}){const s=t;let w=i;const u=F({get(){return s.modelValue},set(x){w("update:modelValue",x)}}),f=F(()=>({width:s.width=="auto"?"100%":`${s.width}`})),b=F(()=>s.isNumber?tt:fe);return(x,T)=>(Le(),Ge(Xe(b.value),{value:u.value,"onUpdate:value":T[0]||(T[0]=O=>u.value=O),size:We(Ke),style:qe(f.value),clearable:""},{prefix:ie(()=>[ue(x.$slots,"prefix")]),suffix:ie(()=>[ue(x.$slots,"suffix")]),_:3},40,["value","size","style"]))}});export{lt as _};
